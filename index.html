<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>BPSR S1 Spec Navigator</title>
    <style>
        :root {
            --bg: #0d1117; --panel: #161b22; --accent: #58a6ff;
            --gold: #d4af37; --text: #c9d1d9; --sub-text: #8b949e;
            --danger: #f85149; --success: #3fb950;
        }
        body { font-family: 'Segoe UI', 'Microsoft YaHei', 'Meiryo', sans-serif; background: var(--bg); color: var(--text); padding: 15px; margin: 0; }
        .container { max-width: 800px; margin: auto; padding-top: 50px; padding-bottom: 80px; }
        
        .lang-switch { position: fixed; top: 15px; right: 15px; display: flex; gap: 5px; z-index: 1000; background: var(--panel); padding: 5px; border-radius: 8px; border: 1px solid #30363d; }
        .lang-btn { padding: 8px 16px; background: #21262d; border: 1px solid #30363d; color: var(--text); border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 0.85rem; }
        .lang-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        .filter-section { background: var(--panel); padding: 25px; border-radius: 12px; border: 1px solid #30363d; margin-bottom: 25px; }
        .step-box { margin-bottom: 20px; }
        .step-label { display: block; margin-bottom: 8px; font-size: 0.9rem; color: var(--accent); font-weight: bold; }
        select { width: 100%; padding: 12px; background: #0d1117; color: white; border: 1px solid #444c56; border-radius: 8px; font-size: 1rem; }

        .equip-card { background: #1c2128; border: 1px solid #30363d; border-radius: 10px; overflow: hidden; margin-bottom: 20px; }
        .equip-header { background: rgba(0,0,0,0.3); padding: 12px 20px; border-bottom: 2px solid var(--gold); }
        .part-name { font-size: 1.1rem; font-weight: bold; color: var(--gold); }

        .judge-banner { padding: 10px 20px; font-weight: bold; font-size: 0.9rem; border-bottom: 1px solid #30363d; }
        .no-drop { background: rgba(248, 81, 73, 0.15); color: #ff7b72; border-left: 5px solid var(--danger); }
        .can-drop { background: rgba(63, 185, 80, 0.15); color: #7ee787; border-left: 5px solid var(--success); }

        .stat-area { padding: 15px 20px; }
        .stat-line { display: flex; justify-content: space-between; margin-bottom: 6px; }
        .highlight { color: var(--accent); font-weight: bold; }
        .ng-stat { color: #8b949e; text-decoration: line-through; opacity: 0.5; }
    </style>
</head>
<body>

<div class="lang-switch">
    <button class="lang-btn active" id="btn-JP" onclick="setLang('JP')">Êó•Êú¨Ë™û</button>
    <button class="lang-btn" id="btn-CN" onclick="setLang('CN')">‰∏≠ÂõΩË™û</button>
    <button class="lang-btn" id="btn-NA" onclick="setLang('NA')">English</button>
</div>

<div class="container">
    <div class="filter-section">
        <div class="step-box">
            <label class="step-label" id="l-step1">1. „ÇØ„É©„Çπ</label>
            <select id="classSel" onchange="refreshSpecs(); render();"></select>
        </div>
        <div class="step-box">
            <label class="step-label" id="l-step2">2. Âûã (Spec)</label>
            <select id="typeSel" onchange="onTypeSelect()"></select>
        </div>
        <div class="step-box">
            <label class="step-label" id="l-step3">3. „É©„É≥„ÇØ</label>
            <select id="rankSel" onchange="render()"></select>
        </div>
    </div>
    <div id="viewArea"></div>
</div>

<script>
    let curLang = 'JP';

    // ÈÉ®‰Ωç„Åî„Å®„ÅÆ„Éâ„É≠„ÉÉ„Éó‰∏çÂèØÂ±ûÊÄß„Éû„Éà„É™„ÉÉ„ÇØ„ÇπÔºàÊ≠ªÂÆàÔºâ
    const FORBIDDEN_BY_PART = {
        "È†≠": ["‰∏áËÉΩ", "„Éï„Ç°„Çπ„Éà", "‰ºöÂøÉ"],
        "‰Ωì": ["Âπ∏ÈÅã", "Âô®Áî®„Åï", "‰ºöÂøÉ"],
        "Êâã": ["„Éï„Ç°„Çπ„Éà", "‰ºöÂøÉ", "‰∏áËÉΩ"],
        "Ë∂≥": ["Âô®Áî®„Åï", "‰ºöÂøÉ", "Âπ∏ÈÅã"],
        "ËÄ≥": ["Âô®Áî®„Åï", "„Éï„Ç°„Çπ„Éà", "‰∏áËÉΩ"],
        "È¶ñ": ["„Éï„Ç°„Çπ„Éà", "Âô®Áî®„Åï", "Âπ∏ÈÅã"],
        "Êåá": ["Âπ∏ÈÅã", "‰∏áËÉΩ", "Âô®Áî®„Åï"],
        "L": ["‰ºöÂøÉ", "‰∏áËÉΩ", "„Éï„Ç°„Çπ„Éà"],
        "R": ["‰ºöÂøÉ", "Âπ∏ÈÅã", "Âô®Áî®„Åï"],
        "ÂÆà": ["‰∏áËÉΩ", "Âπ∏ÈÅã", "„Éï„Ç°„Çπ„Éà"]
    };

    // ‰ΩôË®à„Å™Ë£úË∂≥„Å™„Åó„ÅÆ„É©„É≥„ÇØÁøªË®≥
    const RANKS = [
        { id: "40P", JP: "40Á¥´", CN: "40Á¥´", NA: "40 Epic" },
        { id: "40G", JP: "40Èáë[Ê•µ]", CN: "40Èáë[ÊûÅ]", NA: "40 Gold [Max]" },
        { id: "60P", JP: "60Á¥´", CN: "60Á¥´", NA: "60 Epic" },
        { id: "60G", JP: "60Èáë[Ê•µ]", CN: "60Èáë[ÊûÅ]", NA: "60 Gold [Max]" },
        { id: "70R", JP: "70Ëµ§", CN: "70Á∫¢", NA: "70 Relic" },
        { id: "80G", JP: "80Èáë[Ê•µ]", CN: "80Èáë[ÊûÅ]", NA: "80 Gold [Max]" },
        { id: "100G", JP: "100Èáë", CN: "100Èáë", NA: "100 Gold" }
    ];

    const CLASSES = {
        "HG": { JP:"„Éò„É¥„Ç£„Ç¨„Éº„Éá„Ç£„Ç¢„É≥", CN:"Â∑®ÂàÉÂÆàÊä§ËÄÖ", NA:"Heavy Guardian", specs:["Earthbeat Spec", "Wock Spec"] },
        "SF": { JP:"„Ç∑„Éº„É´„Éâ„Éï„Ç°„Ç§„Çø„Éº", CN:"Á•ûÁõæÈ®éÂ£´", NA:"Shield Fighter", specs:["Haarvery Spec", "Thiaid Spec"] },
        "GL": { JP:"„Ç≤„Ç§„É´„É©„É≥„Çµ„Éº", CN:"ÈùíÂ≤öÈ™ëÂ£´", NA:"Gale Lancer", specs:["Vanguard Spec", "Skyward Spec"] },
        "SB": { JP:"„Çπ„Éà„Éº„É†„Éñ„É¨„Ç§„Éâ", CN:"Èõ∑ÂΩ±ÂâëÂ£´", NA:"Storm Blade", specs:["Mboostine Spec", "Electra Spec"] },
        "DA": { JP:"„Éá„Ç£„Éê„Ç§„É≥„Ç¢„Éº„ÉÅ„É£„Éº", CN:"Á•ûÂ∞ÑÊâã", NA:"Divine Archer", specs:["Markm Spec", "Wittck Spec"] },
        "FM": { JP:"„Éï„É≠„Çπ„Éà„É°„Ç§„Ç∏", CN:"Ê∞∑È≠îÂ∞éÂ∏´", NA:"Frost Mage", specs:["Frostbeam Spec", "Ice Spec"] },
        "VO": { JP:"„É¥„Ç°„Éº„ÉÄ„É≥„Éà„Ç™„É©„ÇØ„É´", CN:"Ê£ÆËØ≠ËÄÖ", NA:"Verndme Oracle", specs:["Sinite Spec", "Lifebind Spec"] },
        "BP": { JP:"„Éì„Éº„Éà„Éë„Éï„Ç©„Éº„Éû„Éº", CN:"ÈúäÈ≠ÇÊ•ΩÊâã", NA:"Beat Performer", specs:["Concerte Spec", "Soul Musician"] }
    };

    const SPECS = {
        "Earthbeat Spec": { JP:"ÂâõË∫´Âûã", CN:"ÂàöË∫´Âûã", NA:"Earthbeat", main:"Á≠ãÂäõ", sub:["Âô®Áî®„Åï", "‰∏áËÉΩ"] }, 
        "Wock Spec": { JP:"ÂâõÂÆàÂûã", CN:"ÂàöÂÆàÂûã", NA:"Wock", main:"Á≠ãÂäõ", sub:["Âπ∏ÈÅã", "Âô®Áî®„Åï"] },
        "Haarvery Spec": { JP:"ÂÖâÁ†ïÂûã", CN:"ÂÖâÁ¢éÂûã", NA:"Haarvery", main:"Á≠ãÂäõ", sub:["‰ºöÂøÉ", "Âô®Áî®„Åï"] }, 
        "Thiaid Spec": { JP:"ÂÖâÁõæÂûã", CN:"ÂÖâÁõæÂûã", NA:"Thiaid", main:"Á≠ãÂäõ", sub:["Âô®Áî®„Åï", "„Éï„Ç°„Çπ„Éà"] },
        "Vanguard Spec": { JP:"ÁÉàÈ¢®Âûã", CN:"ÁÉàÈ£éÂûã", NA:"Vanguard", main:"Á≠ãÂäõ", sub:["„Éï„Ç°„Çπ„Éà", "Âô®Áî®„Åï"] }, 
        "Skyward Spec": { JP:"‰π±È¢®Âûã", CN:"‰π±È¢®Âûã", NA:"Skyward", main:"Á≠ãÂäõ", sub:["‰ºöÂøÉ", "Âπ∏ÈÅã"] },
        "Mboostine Spec": { JP:"Èõ∑ÂàÉÂûã", CN:"Èõ∑ÂàÉÂûã", NA:"Mboostine", main:"ÊïèÊç∑", sub:["‰ºöÂøÉ", "Âô®Áî®„Åï"] }, 
        "Electra Spec": { JP:"ÊúàÂΩ±Âûã", CN:"ÊúàÂΩ±Âûã", NA:"Electra", main:"ÊïèÊç∑", sub:["„Éï„Ç°„Çπ„Éà", "Âπ∏ÈÅã"] },
        "Markm Spec": { JP:"ÁãºÂºìÂûã", CN:"ÁãºÂºìÂûã", NA:"Markm", main:"ÊïèÊç∑", sub:["Âô®Áî®„Åï", "„Éï„Ç°„Çπ„Éà"] }, 
        "Wittck Spec": { JP:"È∑πÂºìÂûã", CN:"Èπ∞ÂºìÂûã", NA:"Wittck", main:"ÊïèÊç∑", sub:["‰ºöÂøÉ", "„Éï„Ç°„Çπ„Éà"] },
        "Frostbeam Spec": { JP:"Ê∞∑ÁâôÂûã", CN:"ÂÜ∞ÁâôÂûã", NA:"Frostbeam", main:"Áü•Âäõ", sub:["‰ºöÂøÉ", "Âπ∏ÈÅã"] }, 
        "Ice Spec": { JP:"ÈúúÂ§©Âûã", CN:"ÈúúÂ§©Âûã", NA:"Ice", main:"Áü•Âäõ", sub:["„Éï„Ç°„Çπ„Éà", "Âô®Áî®„Åï"] },
        "Sinite Spec": { JP:"Â®ÅÂí≤Âûã", CN:"Â®ÅÂí≤Âûã", NA:"Sinite", main:"Áü•Âäõ", sub:["Âπ∏ÈÅã", "Âô®Áî®„Åï"] }, 
        "Lifebind Spec": { JP:"Ê£ÆÁôíÂûã", CN:"Ê£ÆÊÑàÂûã", NA:"Lifebind", main:"Áü•Âäõ", sub:["Âô®Áî®„Åï", "„Éï„Ç°„Çπ„Éà"] },
        "Concerte Spec": { JP:"ÁãÇÈü≥Âûã", CN:"ÁãÇÈü≥Âûã", NA:"Concerte", main:"Áü•Âäõ", sub:["Âπ∏ÈÅã", "„Éï„Ç°„Çπ„Éà"] }, 
        "Soul Musician": { JP:"ÈüøÂ•èÂûã", CN:"ÂìçÂ•èÂûã", NA:"Soul Musician", main:"Áü•Âäõ", sub:["‰ºöÂøÉ", "„Éï„Ç°„Çπ„Éà"] }
    };

    const STAT_DIC = {
        "Á≠ãÂäõ": { JP:"Á≠ãÂäõ", CN:"Â®ÅÂäõ", NA:"STR" }, "ÊïèÊç∑": { JP:"ÊïèÊç∑", CN:"ÊïèÊç∑", NA:"AGI" }, "Áü•Âäõ": { JP:"Áü•Âäõ", CN:"Êô∫Âäõ", NA:"INT" },
        "Âô®Áî®„Åï": { JP:"Âô®Áî®„Åï", CN:"Á≤æÈÄö", NA:"DEX" }, "‰∏áËÉΩ": { JP:"‰∏áËÉΩ", CN:"‰∏áËÉΩ", NA:"Univ" }, "Âπ∏ÈÅã": { JP:"Âπ∏ÈÅã", CN:"Âπ∏Ëøê", NA:"LUK" },
        "‰ºöÂøÉ": { JP:"‰ºöÂøÉ", CN:"‰ºöÂøÉ", NA:"CRIT" }, "„Éï„Ç°„Çπ„Éà": { JP:"„Éï„Ç°„Çπ„Éà", CN:"ÊÄ•ÈÄü", NA:"FAST" }
    };

    const UI = {
        JP: { s1:"1. „ÇØ„É©„Çπ", s2:"2. Âûã (Spec)", s3:"3. „É©„É≥„ÇØ", ok:"‚úÖ „Éâ„É≠„ÉÉ„ÉóÂèØËÉΩ", ng:"‚ö†Ô∏è ÁîüÁî£ÈôêÂÆö" },
        CN: { s1:"1. ËÅå‰∏ö", s2:"2. ÊµÅÊ¥æ", s3:"3. Á≠âÁ∫ß", ok:"‚úÖ ÂâØÊú¨ÂèØÊéâËêΩ", ng:"‚ö†Ô∏è ÂøÖÈ°ªÂà∂‰Ωú" },
        NA: { s1:"1. Class", s2:"2. Spec", s3:"3. Rank", ok:"‚úÖ Dungeon Drop", ng:"‚ö†Ô∏è Craft Only" }
    };

    const PARTS = [{id:"È†≠",n:"È†≠ (Helm)"},{id:"‰Ωì",n:"‰Ωì (Armor)"},{id:"Êâã",n:"Êâã (Glove)"},{id:"Ë∂≥",n:"Ë∂≥ (Boots)"},{id:"ËÄ≥",n:"ËÄ≥ (Earring)"},{id:"È¶ñ",n:"È¶ñ (Neck)"},{id:"Êåá",n:"ÊåáËº™ (Ring)"},{id:"L",n:"LÊåá (L-Ring)"},{id:"R",n:"RÊåá (R-Ring)"},{id:"ÂÆà",n:"ÂÆà (Amulet)"}];

    function setLang(lang) {
        curLang = lang;
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.id === `btn-${lang}`));
        initSelectors();
        render();
    }

    function initSelectors() {
        const u = UI[curLang];
        document.getElementById('l-step1').innerText = u.s1;
        document.getElementById('l-step2').innerText = u.s2;
        document.getElementById('l-step3').innerText = u.s3;

        const cs = document.getElementById('classSel');
        const oldC = cs.value;
        cs.innerHTML = `<option value="">-- Class --</option>`;
        for(let id in CLASSES) cs.innerHTML += `<option value="${id}" ${id===oldC?'selected':''}>${CLASSES[id][curLang]}</option>`;

        refreshSpecs();

        const rs = document.getElementById('rankSel');
        const oldR = rs.value;
        rs.innerHTML = '<option value="">-- Rank --</option>';
        RANKS.forEach(r => rs.innerHTML += `<option value="${r.id}" ${r.id===oldR?'selected':''}>${r[curLang]}</option>`);
    }

    function refreshSpecs() {
        const cId = document.getElementById('classSel').value;
        const ts = document.getElementById('typeSel');
        const oldT = ts.value;
        ts.innerHTML = '<option value="">-- Spec --</option>';
        if(cId) {
            CLASSES[cId].specs.forEach(s => ts.innerHTML += `<option value="${s}" ${s===oldT?'selected':''}>${SPECS[s][curLang]}</option>`);
        } else {
            for(let s in SPECS) ts.innerHTML += `<option value="${s}" ${s===oldT?'selected':''}>${SPECS[s][curLang]}</option>`;
        }
    }

    function onTypeSelect() {
        const tId = document.getElementById('typeSel').value;
        if(tId) {
            for(let c in CLASSES) { if(CLASSES[c].specs.includes(tId)) { document.getElementById('classSel').value = c; break; } }
        }
        render();
    }

    function render() {
        const tId = document.getElementById('typeSel').value;
        const rId = document.getElementById('rankSel').value;
        const area = document.getElementById('viewArea');
        if(!tId || !rId) { area.innerHTML = ""; return; }

        const spec = SPECS[tId];
        const u = UI[curLang];

        area.innerHTML = PARTS.map(p => {
            const forbiddenList = FORBIDDEN_BY_PART[p.id];
            const isSub0NG = forbiddenList.includes(spec.sub[0]);
            const isSub1NG = forbiddenList.includes(spec.sub[1]);
            const isNG = isSub0NG || isSub1NG;
            const mainName = STAT_DIC[spec.main][curLang];

            return `
                <div class="equip-card">
                    <div class="equip-header"><span class="part-name">${p.n}</span></div>
                    <div class="judge-banner ${isNG?'no-drop':'can-drop'}">${isNG ? u.ng : u.ok}</div>
                    <div class="stat-area">
                        <div class="stat-line"><span class="highlight">${mainName}</span><span>MAX</span></div>
                        <div class="stat-line">
                            <span class="${isSub0NG ? 'ng-stat' : 'highlight'}">${STAT_DIC[spec.sub[0]][curLang]}</span>
                            <span>${isSub0NG ? '‚ùå' : 'üëç'}</span>
                        </div>
                        <div class="stat-line">
                            <span class="${isSub1NG ? 'ng-stat' : 'highlight'}">${STAT_DIC[spec.sub[1]][curLang]}</span>
                            <span>${isSub1NG ? '‚ùå' : 'üëç'}</span>
                        </div>
                    </div>
                </div>
            `;
        }).join('');
    }
    setLang('JP');
</script>
</body>
</html>
